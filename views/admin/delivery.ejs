<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Delivery Personnel - GrocerGo</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        body { background-color: #f7fafc; }
        .admin-nav a[href="/admin/delivery"] { background-color: var(--primary); color: white; }
    </style>
</head>
<body>
    <div class="flex min-h-screen">
        <%- include('./partials/sidebar') %>

        <main class="flex-1 p-8">
            <h2 class="text-3xl font-bold mb-6">Manage Delivery Personnel</h2>

            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-xl font-bold mb-4">Add New Person</h3>
                <form action="/admin/delivery" method="POST" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                    <div class="md:col-span-1">
                        <label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
                        <input type="text" name="name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                    </div>
                    <div>
                        <label for="phone_number" class="block text-sm font-medium text-gray-700">Phone Number</label>
                        <input type="text" name="phone_number" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                    </div>
                    <div>
                        <label for="vehicle_details" class="block text-sm font-medium text-gray-700">Vehicle Details</label>
                        <input type="text" name="vehicle_details" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                    </div>
                    <button type="submit" class="w-full px-4 py-2 rounded-md text-white bg-primary hover:bg-green-700 font-semibold">Add Person</button>
                </form>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                <table class="w-full text-left">
                    <thead>
                        <tr class="border-b">
                            <th class="p-4">Name</th><th class="p-4">Phone</th><th class="p-4">Vehicle</th><th class="p-4">Status</th><th class="p-4 text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% personnel.forEach(person => { %>
                            <tr class="border-b">
                                <td class="p-4 font-medium"><%= person.name %></td>
                                <td class="p-4"><%= person.phone_number %></td>
                                <td class="p-4"><%= person.vehicle_details %></td>
                                <td class="p-4">
                                    <% if (person.is_verified) { %>
                                        <span class="px-2 py-1 text-xs font-semibold text-green-800 bg-green-200 rounded-full">Verified</span>
                                    <% } else { %>
                                        <span class="px-2 py-1 text-xs font-semibold text-red-800 bg-red-200 rounded-full">Not Verified</span>
                                    <% } %>
                                </td>
                                <td class="p-4 text-right flex justify-end space-x-2">
                                    <form action="/admin/delivery/<%= person.id %>/verify" method="POST">
                                        <button type="submit" class="px-3 py-1 text-xs rounded-md text-white font-semibold <%= person.is_verified ? 'bg-orange-500 hover:bg-orange-600' : 'bg-green-500 hover:bg-green-600' %>">
                                            <%= person.is_verified ? 'Unverify' : 'Verify' %>
                                        </button>
                                    </form>
                                    <form action="/admin/delivery/<%= person.id %>/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this person?');">
                                        <button type="submit" class="px-3 py-1 text-xs rounded-md text-white font-semibold bg-red-500 hover:bg-red-600">Delete</button>
                                    </form>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </main>
    </div>
</body>
</html>